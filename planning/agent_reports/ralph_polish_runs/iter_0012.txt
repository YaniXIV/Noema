OpenAI Codex v0.98.0 (research preview)
--------
workdir: /Users/yani/Noema/backend
model: gpt-5.2-codex
provider: openai
approval: never
sandbox: workspace-write [workdir, /tmp, $TMPDIR]
reasoning effort: none
reasoning summaries: auto
session id: 019c3ecc-267d-7862-ac95-933716a3042c
--------
user
You are an autonomous coding agent polishing the Noema repository.

Hard rules:
- DO NOT run git commit, git reset, git clean, or anything that modifies git history.
- I will run git commits outside of you.
- Keep changes small: max 3 files per iteration.
- No cosmetic-only edits.
- No new dependencies unless absolutely necessary.
- keep all the same ui functionality, the end user should be able to do the same stuff but the experiance and design should be better.

Goal: continuously improve production quality. continuously improve front end quality and polish.

Iteration:
1) Run: cd backend && go test ./...
2) If failing: fix the smallest root cause (max 3 files), rerun tests until passing.
3) If passing: make ONE meaningful improvement (max 3 files), then rerun tests until passing.

Pick the highest-value improvement:
A) Reliability/correctness: validation, error handling, run persistence, verify robustness
B) Tests: add/strengthen tests for the change you made
C) upgrading the user interface so that it looks better.
D) Maintainability: reduce duplication with tiny refactors
E) UX: wizard/results/verify clarity (small, safe changes)
F) Docs: README/DEPLOYMENT polish
G) Performance: safe wins only

Finish with:
- What you changed (short)
- Tests run (must include go test ./...)
mcp startup: no servers

thinking
**Preparing to run commands**
exec
/bin/zsh -lc 'cd /Users/yani/Noema/backend && go test ./...' in /Users/yani/Noema/backend succeeded in 191ms:
?   	noema/cmd/server	[no test files]
?   	noema/internal/auth	[no test files]
ok  	noema/internal/config	(cached)
?   	noema/internal/crypto	[no test files]
ok  	noema/internal/evaluate	(cached)
?   	noema/internal/gemini	[no test files]
ok  	noema/internal/httputil	(cached)
ok  	noema/internal/session	(cached)
ok  	noema/internal/verify	(cached)
?   	noema/internal/web	[no test files]
ok  	noema/internal/zk	(cached)

thinking
**Searching for frontend UI files**

I'm going to locate and list frontend UI files to identify where improvements might be needed.
exec
/bin/zsh -lc "cd /Users/yani/Noema/backend && rg --files -g '*.{html,css,js,ts,tsx,go}'" in /Users/yani/Noema/backend succeeded in 52ms:
internal/session/session_test.go
internal/session/session.go
internal/evaluate/prompt.go
internal/evaluate/parse.go
internal/evaluate/output.go
internal/evaluate/handler_test.go
internal/evaluate/schema.go
internal/evaluate/dataset.go
internal/evaluate/storage.go
internal/evaluate/storage_test.go
internal/evaluate/images.go
internal/evaluate/handler_integration_test.go
internal/evaluate/cache.go
internal/evaluate/commitment.go
internal/evaluate/policy.go
internal/evaluate/spec.go
internal/evaluate/gemini_eval.go
internal/evaluate/handler.go
internal/web/auth.go
internal/web/upload.go

thinking
**Reviewing CSS for UI improvements**
exec
/bin/zsh -lc "cd /Users/yani/Noema/backend && sed -n '1,220p' web/static/styles.css" in /Users/yani/Noema/backend succeeded in 52ms:
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&family=Space+Grotesk:wght@400;500;600&display=swap');

:root {
  --bg: #05060a;
  --bg-card: rgba(9, 12, 18, 0.9);
  --text: #f4f6fb;
  --text-muted: #9aa3b2;
  --accent: #45d4ff;
  --accent-strong: #2c7bff;
  --accent-glow: rgba(69, 212, 255, 0.35);
  --border: rgba(255, 255, 255, 0.08);
  --border-strong: rgba(69, 212, 255, 0.4);
  --error: #f87171;
  --success: #22c55e;
  --warning: #fbbf24;
  --shadow: 0 24px 48px rgba(0, 0, 0, 0.45);
}

*,
*::before,

thinking
**Reviewing CSS for button and form improvements**
exec
/bin/zsh -lc 'cd /Users/yani/Noema/backend && rg -n "button|input|select|textarea|form" web/static/styles.css' in /Users/yani/Noema/backend succeeded in 52ms:
65:  transform: translate(50%, -50%);
210:  0% { transform: scale(0.7); opacity: 0.5; }
211:  50% { transform: scale(1); opacity: 1; }
212:  100% { transform: scale(0.7); opacity: 0.5; }
216:  text-transform: uppercase;
225:.form { display: flex; flex-direction: column; gap: 1rem; }
227:.form-actions {
234:.form-group {
247:.form-hint {
253:.input {
264:.input::placeholder { color: var(--text-muted); }
265:.input:hover { border-color: rgba(255,255,255,0.18); }
266:.input:focus {
271:.input.is-invalid {
276:.textarea { min-height: 160px; resize: vertical; }
312:  transition: border-color 0.15s ease, color 0.15s ease, box-shadow 0.15s ease, transform 0.05s ease, background 0.15s ease;
319:.btn:active { transform: translateY(1px); }
344:.input:focus-visible,
414:  text-transform: uppercase;
468:.upload-zone input[type="file"] {
exec
/bin/zsh -lc "cd /Users/yani/Noema/backend && sed -n '220,360p' web/static/styles.css" in /Users/yani/Noema/backend succeeded in 52ms:
  margin-bottom: 0.75rem;
}

.text-muted { color: var(--text-muted); }

.form { display: flex; flex-direction: column; gap: 1rem; }

.form-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  align-items: center;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
  margin-bottom: 1.2rem;
}

thinking
**Considering UI focus improvements**
exec
/bin/zsh -lc "cd /Users/yani/Noema/backend && sed -n '430,560p' web/static/styles.css" in /Users/yani/Noema/backend succeeded in 52ms:
}
.status-pill-unknown {
  color: var(--text-muted);
  border-color: rgba(255, 255, 255, 0.14);
}

.demos-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 0.6rem;
}
.demo-btn { width: 100%; }

/* ===== Upload ===== */
.upload-zone {
  display: block;
  position: relative;
  width: 100%;
  min-height: 160px;
  border: 2px dashed var(--border);

thinking
**Reviewing UI improvement options**

I'm considering enhancing accessibility in the stepper or adding a sticky header but will prioritize functional improvements like refining the results tables near the end.
exec
/bin/zsh -lc "cd /Users/yani/Noema/backend && sed -n '820,1040p' web/static/styles.css" in /Users/yani/Noema/backend succeeded in 52ms:
}

.results-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
}

.results-summary {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
}

.results-runline {
  display: inline-flex;
  align-items: center;
  gap: 0.75rem;

thinking
**Reviewing upload zone interactivity**

I'm evaluating the upload area for possible UI improvements like adding a dragover animation or visual feedback using existing classes to enhance the user experience beyond just cosmetic changes. Next, I'll check upload.js to see if dragover handling is implemented or can be improved.
exec
/bin/zsh -lc "cd /Users/yani/Noema/backend && sed -n '1,220p' web/static/upload.js" in /Users/yani/Noema/backend succeeded in 51ms:
(function() {
  var input = document.getElementById('file-input');
  var zone = document.getElementById('drop-zone');
  var zoneText = document.getElementById('zone-text');
  var submitBtn = document.getElementById('submit-btn');
  var details = document.getElementById('upload-details');
  var fileName = document.getElementById('upload-file-name');
  var fileSize = document.getElementById('upload-file-size');
  var clearBtn = document.getElementById('clear-file');

  function formatBytes(bytes) {
    if (!bytes && bytes !== 0) return '';
    if (bytes < 1024) return bytes + ' B';
    var kb = bytes / 1024;
    if (kb < 1024) return kb.toFixed(1) + ' KB';
    var mb = kb / 1024;
    if (mb < 1024) return mb.toFixed(1) + ' MB';
    var gb = mb / 1024;
    return gb.toFixed(1) + ' GB';
  }

thinking
**Reviewing upload zone for accessibility and validation improvements**

Considering adding keyboard accessibility, type-specific restrictions, and inline validation with helper text for allowed file types while maintaining current functionality; next, I'll check the upload.html template for relevant code.
exec
/bin/zsh -lc "cd /Users/yani/Noema/backend && sed -n '1,220p' web/templates/upload.html" in /Users/yani/Noema/backend succeeded in 52ms:
{{define "upload"}}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Noema — Upload</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  {{template "header_upload" .}}

  <main class="main">
    {{template "orb" .}}
    <div class="card">
      <h1 class="card-title">Upload</h1>
      <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
        <label class="upload-zone" for="file-input" id="drop-zone">
          <input type="file" name="file" id="file-input" accept="*">
          <span id="zone-text">Drag and drop a file here, or click to choose</span>

thinking
**Reviewing upload handling for validation**

I'm checking the upload backend to see if file size or type validation exists server-side before considering adding client-side checks or UI enhancements.
exec
/bin/zsh -lc "cd /Users/yani/Noema/backend && sed -n '1,240p' internal/web/upload.go" in /Users/yani/Noema/backend succeeded in 51ms:
package web

import (
	"fmt"
	"io"
	"net/http"
	"os"
	"path/filepath"
	"strings"
	"time"

	"noema/internal/config"
	"noema/internal/httputil"

	"github.com/gin-gonic/gin"
)

// UploadData is passed to the upload template.
type UploadData struct {
	Error    string

thinking
**Scoping client-side size validation**

I'm planning to add client-side 50MB upload size validation using a hardcoded data attribute in upload.html plus corresponding updates in upload.js and CSS for a hint, keeping changes within three files without modifying backend Go code.
exec
/bin/zsh -lc "cd /Users/yani/Noema/backend && sed -n '1,200p' internal/config/limits.go" in /Users/yani/Noema/backend succeeded in 52ms:
package config

const (
	MaxDatasetBytes    = 50 * 1024 * 1024 // 50MB
	MaxImageBytes      = 5 * 1024 * 1024  // 5MB
	MaxImages          = 10
	MaxUploadBytes     = 50 * 1024 * 1024 // 50MB
	MaxVerifyBytes     = 5 * 1024 * 1024  // 5MB
	MaxMultipartMemory = 100 << 20        // 100MB for evaluate (dataset + images)
)


thinking
**Planning upload size limit integration**

I'm expanding the upload data struct to include max byte limits and a formatted label, passing these via the Go handler to the template for a dynamic max size hint and JS validation using a data attribute, all while keeping changes confined to three files and avoiding hardcoded values.
thinking
**Designing client-side upload validation**

I'm enhancing the Go handler to default max upload bytes and label, adding data attributes and a hidden error div in the HTML for client-side validation, and updating JS to show file size errors, disable submit, and clear errors dynamically, all while minimizing UI changes and avoiding CSS adjustments.
file update
M /Users/yani/Noema/backend/internal/web/upload.go
@@ -19,6 +19,8 @@
 type UploadData struct {
-	Error    string
-	Success  bool
-	FileName string
-	FileSize string
+	Error         string
+	Success       bool
+	FileName      string
+	FileSize      string
+	MaxBytes      int64
+	MaxBytesLabel string
 }
@@ -27,2 +29,8 @@
 func UploadGet(c *gin.Context, tmpl string, data UploadData) {
+	if data.MaxBytes == 0 {
+		data.MaxBytes = config.MaxUploadBytes
+	}
+	if data.MaxBytesLabel == "" {
+		data.MaxBytesLabel = formatSize(data.MaxBytes)
+	}
 	c.HTML(http.StatusOK, tmpl, data)
apply_patch(auto_approved=true) exited 0 in 31ms:
Success. Updated the following files:
M /Users/yani/Noema/backend/internal/web/upload.go
file update:
diff --git a/backend/internal/web/upload.go b/backend/internal/web/upload.go
index 2c0427c7ad0a38e766c6223fcf315f768bbef174..1c786a083c00f9e0d6122b2195540c6176164ef9
--- a/backend/internal/web/upload.go
+++ b/backend/internal/web/upload.go
@@ -17,14 +17,22 @@
 
 // UploadData is passed to the upload template.
 type UploadData struct {
-	Error    string
-	Success  bool
-	FileName string
-	FileSize string
+	Error         string
+	Success       bool
+	FileName      string
+	FileSize      string
+	MaxBytes      int64
+	MaxBytesLabel string
 }
 
 // UploadGet renders the upload page (GET /upload).
 func UploadGet(c *gin.Context, tmpl string, data UploadData) {
+	if data.MaxBytes == 0 {
+		data.MaxBytes = config.MaxUploadBytes
+	}
+	if data.MaxBytesLabel == "" {
+		data.MaxBytesLabel = formatSize(data.MaxBytes)
+	}
 	c.HTML(http.StatusOK, tmpl, data)
 }
 

file update:
diff --git a/backend/internal/web/upload.go b/backend/internal/web/upload.go
index 2c0427c7ad0a38e766c6223fcf315f768bbef174..1c786a083c00f9e0d6122b2195540c6176164ef9
--- a/backend/internal/web/upload.go
+++ b/backend/internal/web/upload.go
@@ -17,14 +17,22 @@
 
 // UploadData is passed to the upload template.
 type UploadData struct {
-	Error    string
-	Success  bool
-	FileName string
-	FileSize string
+	Error         string
+	Success       bool
+	FileName      string
+	FileSize      string
+	MaxBytes      int64
+	MaxBytesLabel string
 }
 
 // UploadGet renders the upload page (GET /upload).
 func UploadGet(c *gin.Context, tmpl string, data UploadData) {
+	if data.MaxBytes == 0 {
+		data.MaxBytes = config.MaxUploadBytes
+	}
+	if data.MaxBytesLabel == "" {
+		data.MaxBytesLabel = formatSize(data.MaxBytes)
+	}
 	c.HTML(http.StatusOK, tmpl, data)
 }
 


thinking
**Updating upload.html**
file update
M /Users/yani/Noema/backend/web/templates/upload.html
@@ -18,3 +18,3 @@
         <label class="upload-zone" for="file-input" id="drop-zone">
-          <input type="file" name="file" id="file-input" accept="*">
+          <input type="file" name="file" id="file-input" accept="*" data-max-bytes="{{.MaxBytes}}" data-max-bytes-label="{{.MaxBytesLabel}}" aria-describedby="upload-hint upload-client-error">
           <span id="zone-text">Drag and drop a file here, or click to choose</span>
@@ -28,3 +28,4 @@
         </div>
-        <p class="form-hint upload-hint" id="upload-hint">CSV, JSON, or text files recommended.</p>
+        <p class="form-hint upload-hint" id="upload-hint">CSV, JSON, or text files recommended. Max {{.MaxBytesLabel}}.</p>
+        <div class="upload-result error" id="upload-client-error" aria-live="polite" style="display:none;"></div>
         <button type="submit" class="btn" id="submit-btn" style="margin-top: 1rem;" disabled>Upload</button>
apply_patch(auto_approved=true) exited 0 in 36ms:
Success. Updated the following files:
M /Users/yani/Noema/backend/web/templates/upload.html
file update:
diff --git a/backend/internal/web/upload.go b/backend/internal/web/upload.go
index 2c0427c7ad0a38e766c6223fcf315f768bbef174..1c786a083c00f9e0d6122b2195540c6176164ef9
--- a/backend/internal/web/upload.go
+++ b/backend/internal/web/upload.go
@@ -17,14 +17,22 @@
 
 // UploadData is passed to the upload template.
 type UploadData struct {
-	Error    string
-	Success  bool
-	FileName string
-	FileSize string
+	Error         string
+	Success       bool
+	FileName      string
+	FileSize      string
+	MaxBytes      int64
+	MaxBytesLabel string
 }
 
 // UploadGet renders the upload page (GET /upload).
 func UploadGet(c *gin.Context, tmpl string, data UploadData) {
+	if data.MaxBytes == 0 {
+		data.MaxBytes = config.MaxUploadBytes
+	}
+	if data.MaxBytesLabel == "" {
+		data.MaxBytesLabel = formatSize(data.MaxBytes)
+	}
 	c.HTML(http.StatusOK, tmpl, data)
 }
 
diff --git a/backend/web/templates/upload.html b/backend/web/templates/upload.html
index 955ed9b55e98c62f4f91f02661981e5dee8aaff9..462b365c47149947726d320174b37b72053e70e4
--- a/backend/web/templates/upload.html
+++ b/backend/web/templates/upload.html
@@ -16,7 +16,7 @@
       <h1 class="card-title">Upload</h1>
       <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
         <label class="upload-zone" for="file-input" id="drop-zone">
-          <input type="file" name="file" id="file-input" accept="*">
+          <input type="file" name="file" id="file-input" accept="*" data-max-bytes="{{.MaxBytes}}" data-max-bytes-label="{{.MaxBytesLabel}}" aria-describedby="upload-hint upload-client-error">
           <span id="zone-text">Drag and drop a file here, or click to choose</span>
         </label>
         <div class="upload-details" id="upload-details" aria-live="polite" style="display:none;">
@@ -26,7 +26,8 @@
           </div>
           <button type="button" class="btn btn-ghost btn-sm" id="clear-file">Clear</button>
         </div>
-        <p class="form-hint upload-hint" id="upload-hint">CSV, JSON, or text files recommended.</p>
+        <p class="form-hint upload-hint" id="upload-hint">CSV, JSON, or text files recommended. Max {{.MaxBytesLabel}}.</p>
+        <div class="upload-result error" id="upload-client-error" aria-live="polite" style="display:none;"></div>
         <button type="submit" class="btn" id="submit-btn" style="margin-top: 1rem;" disabled>Upload</button>
       </form>
       {{if .Error}}

file update:
diff --git a/backend/internal/web/upload.go b/backend/internal/web/upload.go
index 2c0427c7ad0a38e766c6223fcf315f768bbef174..1c786a083c00f9e0d6122b2195540c6176164ef9
--- a/backend/internal/web/upload.go
+++ b/backend/internal/web/upload.go
@@ -17,14 +17,22 @@
 
 // UploadData is passed to the upload template.
 type UploadData struct {
-	Error    string
-	Success  bool
-	FileName string
-	FileSize string
+	Error         string
+	Success       bool
+	FileName      string
+	FileSize      string
+	MaxBytes      int64
+	MaxBytesLabel string
 }
 
 // UploadGet renders the upload page (GET /upload).
 func UploadGet(c *gin.Context, tmpl string, data UploadData) {
+	if data.MaxBytes == 0 {
+		data.MaxBytes = config.MaxUploadBytes
+	}
+	if data.MaxBytesLabel == "" {
+		data.MaxBytesLabel = formatSize(data.MaxBytes)
+	}
 	c.HTML(http.StatusOK, tmpl, data)
 }
 
diff --git a/backend/web/templates/upload.html b/backend/web/templates/upload.html
index 955ed9b55e98c62f4f91f02661981e5dee8aaff9..462b365c47149947726d320174b37b72053e70e4
--- a/backend/web/templates/upload.html
+++ b/backend/web/templates/upload.html
@@ -16,7 +16,7 @@
       <h1 class="card-title">Upload</h1>
       <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
         <label class="upload-zone" for="file-input" id="drop-zone">
-          <input type="file" name="file" id="file-input" accept="*">
+          <input type="file" name="file" id="file-input" accept="*" data-max-bytes="{{.MaxBytes}}" data-max-bytes-label="{{.MaxBytesLabel}}" aria-describedby="upload-hint upload-client-error">
           <span id="zone-text">Drag and drop a file here, or click to choose</span>
         </label>
         <div class="upload-details" id="upload-details" aria-live="polite" style="display:none;">
@@ -26,7 +26,8 @@
           </div>
           <button type="button" class="btn btn-ghost btn-sm" id="clear-file">Clear</button>
         </div>
-        <p class="form-hint upload-hint" id="upload-hint">CSV, JSON, or text files recommended.</p>
+        <p class="form-hint upload-hint" id="upload-hint">CSV, JSON, or text files recommended. Max {{.MaxBytesLabel}}.</p>
+        <div class="upload-result error" id="upload-client-error" aria-live="polite" style="display:none;"></div>
         <button type="submit" class="btn" id="submit-btn" style="margin-top: 1rem;" disabled>Upload</button>
       </form>
       {{if .Error}}


thinking
**Updating upload.js**
file update
M /Users/yani/Noema/backend/web/static/upload.js
@@ -9,2 +9,5 @@
   var clearBtn = document.getElementById('clear-file');
+  var clientError = document.getElementById('upload-client-error');
+  var maxBytes = parseInt(input.dataset.maxBytes || '', 10);
+  var maxBytesLabel = input.dataset.maxBytesLabel || '';
 
@@ -21,2 +24,13 @@
 
+  function setClientError(message) {
+    if (!clientError) return;
+    if (message) {
+      clientError.textContent = message;
+      clientError.style.display = 'block';
+      return;
+    }
+    clientError.textContent = '';
+    clientError.style.display = 'none';
+  }
+
   function updateZone() {
@@ -28,3 +42,9 @@
       if (details) details.style.display = 'flex';
-      submitBtn.disabled = false;
+      if (Number.isFinite(maxBytes) && maxBytes > 0 && file.size > maxBytes) {
+        setClientError('File exceeds ' + maxBytesLabel + ' limit.');
+        submitBtn.disabled = true;
+      } else {
+        setClientError('');
+        submitBtn.disabled = false;
+      }
     } else {
@@ -32,2 +52,3 @@
       if (details) details.style.display = 'none';
+      setClientError('');
       submitBtn.disabled = true;
apply_patch(auto_approved=true) exited 0 in 43ms:
Success. Updated the following files:
M /Users/yani/Noema/backend/web/static/upload.js
file update:
diff --git a/backend/internal/web/upload.go b/backend/internal/web/upload.go
index 2c0427c7ad0a38e766c6223fcf315f768bbef174..1c786a083c00f9e0d6122b2195540c6176164ef9
--- a/backend/internal/web/upload.go
+++ b/backend/internal/web/upload.go
@@ -17,14 +17,22 @@
 
 // UploadData is passed to the upload template.
 type UploadData struct {
-	Error    string
-	Success  bool
-	FileName string
-	FileSize string
+	Error         string
+	Success       bool
+	FileName      string
+	FileSize      string
+	MaxBytes      int64
+	MaxBytesLabel string
 }
 
 // UploadGet renders the upload page (GET /upload).
 func UploadGet(c *gin.Context, tmpl string, data UploadData) {
+	if data.MaxBytes == 0 {
+		data.MaxBytes = config.MaxUploadBytes
+	}
+	if data.MaxBytesLabel == "" {
+		data.MaxBytesLabel = formatSize(data.MaxBytes)
+	}
 	c.HTML(http.StatusOK, tmpl, data)
 }
 
diff --git a/backend/web/static/upload.js b/backend/web/static/upload.js
index 0a3e470d2a62e2f3718bea1bda6b6d3476da9800..e880921f8bc3524f7aded381fc75a2f1bb6c213c
--- a/backend/web/static/upload.js
+++ b/backend/web/static/upload.js
@@ -7,6 +7,9 @@
   var fileName = document.getElementById('upload-file-name');
   var fileSize = document.getElementById('upload-file-size');
   var clearBtn = document.getElementById('clear-file');
+  var clientError = document.getElementById('upload-client-error');
+  var maxBytes = parseInt(input.dataset.maxBytes || '', 10);
+  var maxBytesLabel = input.dataset.maxBytesLabel || '';
 
   function formatBytes(bytes) {
     if (!bytes && bytes !== 0) return '';
@@ -19,6 +22,17 @@
     return gb.toFixed(1) + ' GB';
   }
 
+  function setClientError(message) {
+    if (!clientError) return;
+    if (message) {
+      clientError.textContent = message;
+      clientError.style.display = 'block';
+      return;
+    }
+    clientError.textContent = '';
+    clientError.style.display = 'none';
+  }
+
   function updateZone() {
     if (input.files && input.files.length) {
       var file = input.files[0];
@@ -26,10 +40,17 @@
       if (fileName) fileName.textContent = file.name;
       if (fileSize) fileSize.textContent = formatBytes(file.size);
       if (details) details.style.display = 'flex';
-      submitBtn.disabled = false;
+      if (Number.isFinite(maxBytes) && maxBytes > 0 && file.size > maxBytes) {
+        setClientError('File exceeds ' + maxBytesLabel + ' limit.');
+        submitBtn.disabled = true;
+      } else {
+        setClientError('');
+        submitBtn.disabled = false;
+      }
     } else {
       zoneText.textContent = 'Drag and drop a file here, or click to choose';
       if (details) details.style.display = 'none';
+      setClientError('');
       submitBtn.disabled = true;
     }
   }
diff --git a/backend/web/templates/upload.html b/backend/web/templates/upload.html
index 955ed9b55e98c62f4f91f02661981e5dee8aaff9..462b365c47149947726d320174b37b72053e70e4
--- a/backend/web/templates/upload.html
+++ b/backend/web/templates/upload.html
@@ -16,7 +16,7 @@
       <h1 class="card-title">Upload</h1>
       <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
         <label class="upload-zone" for="file-input" id="drop-zone">
-          <input type="file" name="file" id="file-input" accept="*">
+          <input type="file" name="file" id="file-input" accept="*" data-max-bytes="{{.MaxBytes}}" data-max-bytes-label="{{.MaxBytesLabel}}" aria-describedby="upload-hint upload-client-error">
           <span id="zone-text">Drag and drop a file here, or click to choose</span>
         </label>
         <div class="upload-details" id="upload-details" aria-live="polite" style="display:none;">
@@ -26,7 +26,8 @@
           </div>
           <button type="button" class="btn btn-ghost btn-sm" id="clear-file">Clear</button>
         </div>
-        <p class="form-hint upload-hint" id="upload-hint">CSV, JSON, or text files recommended.</p>
+        <p class="form-hint upload-hint" id="upload-hint">CSV, JSON, or text files recommended. Max {{.MaxBytesLabel}}.</p>
+        <div class="upload-result error" id="upload-client-error" aria-live="polite" style="display:none;"></div>
         <button type="submit" class="btn" id="submit-btn" style="margin-top: 1rem;" disabled>Upload</button>
       </form>
       {{if .Error}}

file update:
diff --git a/backend/internal/web/upload.go b/backend/internal/web/upload.go
index 2c0427c7ad0a38e766c6223fcf315f768bbef174..1c786a083c00f9e0d6122b2195540c6176164ef9
--- a/backend/internal/web/upload.go
+++ b/backend/internal/web/upload.go
@@ -17,14 +17,22 @@
 
 // UploadData is passed to the upload template.
 type UploadData struct {
-	Error    string
-	Success  bool
-	FileName string
-	FileSize string
+	Error         string
+	Success       bool
+	FileName      string
+	FileSize      string
+	MaxBytes      int64
+	MaxBytesLabel string
 }
 
 // UploadGet renders the upload page (GET /upload).
 func UploadGet(c *gin.Context, tmpl string, data UploadData) {
+	if data.MaxBytes == 0 {
+		data.MaxBytes = config.MaxUploadBytes
+	}
+	if data.MaxBytesLabel == "" {
+		data.MaxBytesLabel = formatSize(data.MaxBytes)
+	}
 	c.HTML(http.StatusOK, tmpl, data)
 }
 
diff --git a/backend/web/static/upload.js b/backend/web/static/upload.js
index 0a3e470d2a62e2f3718bea1bda6b6d3476da9800..e880921f8bc3524f7aded381fc75a2f1bb6c213c
--- a/backend/web/static/upload.js
+++ b/backend/web/static/upload.js
@@ -7,6 +7,9 @@
   var fileName = document.getElementById('upload-file-name');
   var fileSize = document.getElementById('upload-file-size');
   var clearBtn = document.getElementById('clear-file');
+  var clientError = document.getElementById('upload-client-error');
+  var maxBytes = parseInt(input.dataset.maxBytes || '', 10);
+  var maxBytesLabel = input.dataset.maxBytesLabel || '';
 
   function formatBytes(bytes) {
     if (!bytes && bytes !== 0) return '';
@@ -19,6 +22,17 @@
     return gb.toFixed(1) + ' GB';
   }
 
+  function setClientError(message) {
+    if (!clientError) return;
+    if (message) {
+      clientError.textContent = message;
+      clientError.style.display = 'block';
+      return;
+    }
+    clientError.textContent = '';
+    clientError.style.display = 'none';
+  }
+
   function updateZone() {
     if (input.files && input.files.length) {
       var file = input.files[0];
@@ -26,10 +40,17 @@
       if (fileName) fileName.textContent = file.name;
       if (fileSize) fileSize.textContent = formatBytes(file.size);
       if (details) details.style.display = 'flex';
-      submitBtn.disabled = false;
+      if (Number.isFinite(maxBytes) && maxBytes > 0 && file.size > maxBytes) {
+        setClientError('File exceeds ' + maxBytesLabel + ' limit.');
+        submitBtn.disabled = true;
+      } else {
+        setClientError('');
+        submitBtn.disabled = false;
+      }
     } else {
       zoneText.textContent = 'Drag and drop a file here, or click to choose';
       if (details) details.style.display = 'none';
+      setClientError('');
       submitBtn.disabled = true;
     }
   }
diff --git a/backend/web/templates/upload.html b/backend/web/templates/upload.html
index 955ed9b55e98c62f4f91f02661981e5dee8aaff9..462b365c47149947726d320174b37b72053e70e4
--- a/backend/web/templates/upload.html
+++ b/backend/web/templates/upload.html
@@ -16,7 +16,7 @@
       <h1 class="card-title">Upload</h1>
       <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
         <label class="upload-zone" for="file-input" id="drop-zone">
-          <input type="file" name="file" id="file-input" accept="*">
+          <input type="file" name="file" id="file-input" accept="*" data-max-bytes="{{.MaxBytes}}" data-max-bytes-label="{{.MaxBytesLabel}}" aria-describedby="upload-hint upload-client-error">
           <span id="zone-text">Drag and drop a file here, or click to choose</span>
         </label>
         <div class="upload-details" id="upload-details" aria-live="polite" style="display:none;">
@@ -26,7 +26,8 @@
           </div>
           <button type="button" class="btn btn-ghost btn-sm" id="clear-file">Clear</button>
         </div>
-        <p class="form-hint upload-hint" id="upload-hint">CSV, JSON, or text files recommended.</p>
+        <p class="form-hint upload-hint" id="upload-hint">CSV, JSON, or text files recommended. Max {{.MaxBytesLabel}}.</p>
+        <div class="upload-result error" id="upload-client-error" aria-live="polite" style="display:none;"></div>
         <button type="submit" class="btn" id="submit-btn" style="margin-top: 1rem;" disabled>Upload</button>
       </form>
       {{if .Error}}


thinking
**Confirming numeric support and error messaging**

Number.isFinite is supported and maxBytesLabel should always be set; if not, an error like "File exceeds  limit." could appear. Next, I need to run the full test suite with `go test ./...` from the rule.
exec
/bin/zsh -lc 'cd /Users/yani/Noema/backend && go test ./...' in /Users/yani/Noema/backend succeeded in 278ms:
?   	noema/cmd/server	[no test files]
?   	noema/internal/auth	[no test files]
ok  	noema/internal/config	(cached)
?   	noema/internal/crypto	[no test files]
ok  	noema/internal/evaluate	(cached)
?   	noema/internal/gemini	[no test files]
ok  	noema/internal/httputil	(cached)
ok  	noema/internal/session	(cached)
ok  	noema/internal/verify	(cached)
?   	noema/internal/web	[no test files]
ok  	noema/internal/zk	(cached)
file update:
diff --git a/backend/internal/web/upload.go b/backend/internal/web/upload.go
index 2c0427c7ad0a38e766c6223fcf315f768bbef174..1c786a083c00f9e0d6122b2195540c6176164ef9
--- a/backend/internal/web/upload.go
+++ b/backend/internal/web/upload.go
@@ -17,14 +17,22 @@
 
 // UploadData is passed to the upload template.
 type UploadData struct {
-	Error    string
-	Success  bool
-	FileName string
-	FileSize string
+	Error         string
+	Success       bool
+	FileName      string
+	FileSize      string
+	MaxBytes      int64
+	MaxBytesLabel string
 }
 
 // UploadGet renders the upload page (GET /upload).
 func UploadGet(c *gin.Context, tmpl string, data UploadData) {
+	if data.MaxBytes == 0 {
+		data.MaxBytes = config.MaxUploadBytes
+	}
+	if data.MaxBytesLabel == "" {
+		data.MaxBytesLabel = formatSize(data.MaxBytes)
+	}
 	c.HTML(http.StatusOK, tmpl, data)
 }
 
diff --git a/backend/web/static/upload.js b/backend/web/static/upload.js
index 0a3e470d2a62e2f3718bea1bda6b6d3476da9800..e880921f8bc3524f7aded381fc75a2f1bb6c213c
--- a/backend/web/static/upload.js
+++ b/backend/web/static/upload.js
@@ -7,6 +7,9 @@
   var fileName = document.getElementById('upload-file-name');
   var fileSize = document.getElementById('upload-file-size');
   var clearBtn = document.getElementById('clear-file');
+  var clientError = document.getElementById('upload-client-error');
+  var maxBytes = parseInt(input.dataset.maxBytes || '', 10);
+  var maxBytesLabel = input.dataset.maxBytesLabel || '';
 
   function formatBytes(bytes) {
     if (!bytes && bytes !== 0) return '';
@@ -19,6 +22,17 @@
     return gb.toFixed(1) + ' GB';
   }
 
+  function setClientError(message) {
+    if (!clientError) return;
+    if (message) {
+      clientError.textContent = message;
+      clientError.style.display = 'block';
+      return;
+    }
+    clientError.textContent = '';
+    clientError.style.display = 'none';
+  }
+
   function updateZone() {
     if (input.files && input.files.length) {
       var file = input.files[0];
@@ -26,10 +40,17 @@
       if (fileName) fileName.textContent = file.name;
       if (fileSize) fileSize.textContent = formatBytes(file.size);
       if (details) details.style.display = 'flex';
-      submitBtn.disabled = false;
+      if (Number.isFinite(maxBytes) && maxBytes > 0 && file.size > maxBytes) {
+        setClientError('File exceeds ' + maxBytesLabel + ' limit.');
+        submitBtn.disabled = true;
+      } else {
+        setClientError('');
+        submitBtn.disabled = false;
+      }
     } else {
       zoneText.textContent = 'Drag and drop a file here, or click to choose';
       if (details) details.style.display = 'none';
+      setClientError('');
       submitBtn.disabled = true;
     }
   }
diff --git a/backend/web/templates/upload.html b/backend/web/templates/upload.html
index 955ed9b55e98c62f4f91f02661981e5dee8aaff9..462b365c47149947726d320174b37b72053e70e4
--- a/backend/web/templates/upload.html
+++ b/backend/web/templates/upload.html
@@ -16,7 +16,7 @@
       <h1 class="card-title">Upload</h1>
       <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
         <label class="upload-zone" for="file-input" id="drop-zone">
-          <input type="file" name="file" id="file-input" accept="*">
+          <input type="file" name="file" id="file-input" accept="*" data-max-bytes="{{.MaxBytes}}" data-max-bytes-label="{{.MaxBytesLabel}}" aria-describedby="upload-hint upload-client-error">
           <span id="zone-text">Drag and drop a file here, or click to choose</span>
         </label>
         <div class="upload-details" id="upload-details" aria-live="polite" style="display:none;">
@@ -26,7 +26,8 @@
           </div>
           <button type="button" class="btn btn-ghost btn-sm" id="clear-file">Clear</button>
         </div>
-        <p class="form-hint upload-hint" id="upload-hint">CSV, JSON, or text files recommended.</p>
+        <p class="form-hint upload-hint" id="upload-hint">CSV, JSON, or text files recommended. Max {{.MaxBytesLabel}}.</p>
+        <div class="upload-result error" id="upload-client-error" aria-live="polite" style="display:none;"></div>
         <button type="submit" class="btn" id="submit-btn" style="margin-top: 1rem;" disabled>Upload</button>
       </form>
       {{if .Error}}

codex
What I changed (short)
- Added client-side max upload size awareness (with server-sourced limit) and clearer hinting on the upload page, plus an inline client error message.

Tests run
- `go test ./...`

Files touched
- `internal/web/upload.go`
- `web/templates/upload.html`
- `web/static/upload.js`

If you want another improvement pass, pick a focus area and I’ll keep it to 3 files.
file update:
diff --git a/backend/internal/web/upload.go b/backend/internal/web/upload.go
index 2c0427c7ad0a38e766c6223fcf315f768bbef174..1c786a083c00f9e0d6122b2195540c6176164ef9
--- a/backend/internal/web/upload.go
+++ b/backend/internal/web/upload.go
@@ -17,14 +17,22 @@
 
 // UploadData is passed to the upload template.
 type UploadData struct {
-	Error    string
-	Success  bool
-	FileName string
-	FileSize string
+	Error         string
+	Success       bool
+	FileName      string
+	FileSize      string
+	MaxBytes      int64
+	MaxBytesLabel string
 }
 
 // UploadGet renders the upload page (GET /upload).
 func UploadGet(c *gin.Context, tmpl string, data UploadData) {
+	if data.MaxBytes == 0 {
+		data.MaxBytes = config.MaxUploadBytes
+	}
+	if data.MaxBytesLabel == "" {
+		data.MaxBytesLabel = formatSize(data.MaxBytes)
+	}
 	c.HTML(http.StatusOK, tmpl, data)
 }
 
diff --git a/backend/web/static/upload.js b/backend/web/static/upload.js
index 0a3e470d2a62e2f3718bea1bda6b6d3476da9800..e880921f8bc3524f7aded381fc75a2f1bb6c213c
--- a/backend/web/static/upload.js
+++ b/backend/web/static/upload.js
@@ -7,6 +7,9 @@
   var fileName = document.getElementById('upload-file-name');
   var fileSize = document.getElementById('upload-file-size');
   var clearBtn = document.getElementById('clear-file');
+  var clientError = document.getElementById('upload-client-error');
+  var maxBytes = parseInt(input.dataset.maxBytes || '', 10);
+  var maxBytesLabel = input.dataset.maxBytesLabel || '';
 
   function formatBytes(bytes) {
     if (!bytes && bytes !== 0) return '';
@@ -19,6 +22,17 @@
     return gb.toFixed(1) + ' GB';
   }
 
+  function setClientError(message) {
+    if (!clientError) return;
+    if (message) {
+      clientError.textContent = message;
+      clientError.style.display = 'block';
+      return;
+    }
+    clientError.textContent = '';
+    clientError.style.display = 'none';
+  }
+
   function updateZone() {
     if (input.files && input.files.length) {
       var file = input.files[0];
@@ -26,10 +40,17 @@
       if (fileName) fileName.textContent = file.name;
       if (fileSize) fileSize.textContent = formatBytes(file.size);
       if (details) details.style.display = 'flex';
-      submitBtn.disabled = false;
+      if (Number.isFinite(maxBytes) && maxBytes > 0 && file.size > maxBytes) {
+        setClientError('File exceeds ' + maxBytesLabel + ' limit.');
+        submitBtn.disabled = true;
+      } else {
+        setClientError('');
+        submitBtn.disabled = false;
+      }
     } else {
       zoneText.textContent = 'Drag and drop a file here, or click to choose';
       if (details) details.style.display = 'none';
+      setClientError('');
       submitBtn.disabled = true;
     }
   }
diff --git a/backend/web/templates/upload.html b/backend/web/templates/upload.html
index 955ed9b55e98c62f4f91f02661981e5dee8aaff9..462b365c47149947726d320174b37b72053e70e4
--- a/backend/web/templates/upload.html
+++ b/backend/web/templates/upload.html
@@ -16,7 +16,7 @@
       <h1 class="card-title">Upload</h1>
       <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
         <label class="upload-zone" for="file-input" id="drop-zone">
-          <input type="file" name="file" id="file-input" accept="*">
+          <input type="file" name="file" id="file-input" accept="*" data-max-bytes="{{.MaxBytes}}" data-max-bytes-label="{{.MaxBytesLabel}}" aria-describedby="upload-hint upload-client-error">
           <span id="zone-text">Drag and drop a file here, or click to choose</span>
         </label>
         <div class="upload-details" id="upload-details" aria-live="polite" style="display:none;">
@@ -26,7 +26,8 @@
           </div>
           <button type="button" class="btn btn-ghost btn-sm" id="clear-file">Clear</button>
         </div>
-        <p class="form-hint upload-hint" id="upload-hint">CSV, JSON, or text files recommended.</p>
+        <p class="form-hint upload-hint" id="upload-hint">CSV, JSON, or text files recommended. Max {{.MaxBytesLabel}}.</p>
+        <div class="upload-result error" id="upload-client-error" aria-live="polite" style="display:none;"></div>
         <button type="submit" class="btn" id="submit-btn" style="margin-top: 1rem;" disabled>Upload</button>
       </form>
       {{if .Error}}

tokens used
19,531
What I changed (short)
- Added client-side max upload size awareness (with server-sourced limit) and clearer hinting on the upload page, plus an inline client error message.

Tests run
- `go test ./...`

Files touched
- `internal/web/upload.go`
- `web/templates/upload.html`
- `web/static/upload.js`

If you want another improvement pass, pick a focus area and I’ll keep it to 3 files.
